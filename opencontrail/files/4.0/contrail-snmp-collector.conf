{%- from "opencontrail/map.jinja" import collector with context %}
[DEFAULTS]
collectors = {% for member in collector.analytics.members %}{{ member.host }}:8086 {% endfor %}
#fast_scan_frequency=60
#http_server_port=5920
log_local=1
log_level=SYS_NOTICE
log_file=/var/log/contrail/contrail-snmp-collector.log
zookeeper = {% for member in collector.database.members %}{{ member.host }}:2182{% if not loop.last %},{% endif %}{% endfor %}
#scan_frequency=600
{%- if collector.get('sandesh_send_rate_limits', {}).get('snmp_collector') %}
sandesh_send_rate_limit={{ collector.sandesh_send_rate_limits.snmp_collector }}
{%- elif collector.get('sandesh_send_rate_limits', {}).get('global') %}
sandesh_send_rate_limit={{ collector.sandesh_send_rate_limits.global }}
{%- endif %}

{%- if collector.version >= 4.1 %}
[CONFIGDB]
{%- if collector.get('message_queue', {}).members is defined %}
rabbitmq_server_list={{ collector.message_queue.members | join(',', attribute='host') }}
rabbitmq_ha_mode=True
{%- elif collector.get('message_queue', {}).host is defined %}
rabbitmq_server_list={{ collector.message_queue.host }}
{%- endif %}
rabbitmq_port={{ collector.get('message_queue', {}).get('port', 5672) }}
rabbitmq_user={{ collector.get('message_queue', {}).get('user', 'guest') }}
rabbitmq_password={{ collector.get('message_queue', {}).get('password', 'guest') }}
rabbitmq_vhost={{ collector.get('message_queue', {}).get('vhost', '') }}
config_db_server_list={% for member in collector.get('config', {}).get('members', {}) %}{{ member.host }}:9161 {% endfor %}
#config_db_username=
#config_db_password=
{% else %}
[API_SERVER]
# List of api-servers in ip:port format separated by space
api_server_list={% for member in collector.config.members %}{{ member.host }}:9100 {% endfor %}
#api_server_use_ssl=False

[KEYSTONE]
#keystone parameters come from contrail-keystone-auth.conf
#auth_host=127.0.0.1
#auth_protocol=http
#auth_port=35357
#admin_user=user1
#admin_password=password1
#admin_tenant_name=default-domain
{% endif %}

[SANDESH]
#sandesh_ssl_enable=False
#introspect_ssl_enable=False
#sandesh_keyfile=/etc/contrail/ssl/private/server-privkey.pem
#sandesh_certfile=/etc/contrail/ssl/certs/server.pem
#sandesh_ca_cert=/etc/contrail/ssl/certs/ca-cert.pem
