{%- from "opencontrail/map.jinja" import compute with context %}
[DEFAULTS]
# Sandesh send rate limit can be used to throttle system logs transmitted per
# second. System logs are dropped if the sending rate is exceeded
# sandesh_send_rate_limit=
{%- if compute.get('sandesh_send_rate_limits', {}).get('nodemgr') %}
sandesh_send_rate_limit={{ compute.sandesh_send_rate_limits.nodemgr }}
{%- elif compute.get('sandesh_send_rate_limits', {}).get('global') %}
sandesh_send_rate_limit={{ compute.sandesh_send_rate_limits.global }}
{%- endif %}

[COLLECTOR]
{%- set collector_members = [] %}
{%- for member in compute.collector.members %}
{%-   if member not in collector_members %}
{%-     do collector_members.append(member) %}
{%-   endif %}
{%- endfor %}
server_list = {% for member in collector_members %}{{ member.host }}:8086 {% endfor %}
